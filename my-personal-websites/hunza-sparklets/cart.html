<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  
  <title>Your Cart ‚Äî Premium RO Bottled Water in Lahore | Hunza Sparklets</title>
  <meta name="description" content="Review your bottled water order and proceed to checkout. Reliable RO-treated drinking water delivery for events, offices and homes across Lahore.">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="images/logos/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="images/logos/favicon.svg" />
  <link rel="shortcut icon" href="images/logos/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="images/logos/apple-touch-icon.png" />
  <link rel="manifest" href="images/logos/site.webmanifest" />

  <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>

  <header class="site-header" role="banner">
    <div class="container">
      <a class="brand" href="index.html">
        <img src="images/logos/hunza-sparklets-logo.webp" alt="Hunza Sparklets logo">
      </a>

      <nav class="primary" role="navigation" aria-label="Main navigation">
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="products.html">Products</a>
        <a href="buy-bottled-water.html">Where to Buy</a>
        <a href="sustainability.html">Sustainability</a>
        <a href="contact.html">Contact</a>
      </nav>

      <div style="display:flex;gap:12px;align-items:center">
		  <!-- REPLACE the existing: <a class="cta" href="buy-bottled-water.html">Buy Now</a> -->
<div class="header-cta-wrapper" aria-live="polite">
  <!-- Buy button (keeps .cta class so your styling stays identical) -->
  <a class="cta header-buy" href="buy-bottled-water.html" id="headerBuy">Buy Now</a>

  <!-- Cart button turned into real link -->
  <a id="headerCart" class="header-cart" href="cart.html" aria-label="View cart" title="View cart" style="display:none">
    <!-- shopping cart icon (currentColor) -->
    <svg class="cart-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg">
      <path d="M3 3h2l.6 2M7 13h10l3-8H6.6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
      <circle cx="10" cy="20" r="1.4" fill="currentColor"/>
      <circle cx="18" cy="20" r="1.4" fill="currentColor"/>
    </svg>

    <!-- badge for unique items -->
    <span id="cartBadge" class="cart-badge" aria-hidden="true">0</span>
  </a>
</div>



		  <!-- Theme toggle should ALWAYS be visible -->
		  <button id="themeToggle" class="theme-toggle" aria-label="Toggle dark mode">üåô</button>

		  <!-- Hamburger stays separate -->
		  <div class="hamburger" id="hamburger">
		    <button aria-label="Open menu">
		      <span></span><span></span><span></span>
		    </button>
		  </div>
		</div>
      </div>
    </div>
  </header>

  <!-- mobile menu -->
  <aside class="mobile-menu" id="mobileMenu" aria-hidden="true">
    <div class="close"><button id="closeMenu" aria-label="Close menu">‚úï</button></div>
    <nav>
      <a href="index.html">Home</a>
      <a href="about.html">About</a>
      <a href="products.html">Products</a>
      <a href="buy-bottled-water.html">Where to Buy</a>
      <a href="sustainability.html">Sustainability</a>
      <a href="contact.html">Contact</a>
    </nav>
  </aside>

  <section class="cart-page">
  <div class="container cart-container">

    <!-- Left: cart items -->
    <div class="cart-items-col">
      <h1 class="cart-title">Your Cart</h1>
      <div id="cartEmpty" class="cart-empty" hidden>
        <p>Your cart is empty. <a href="buy-bottled-water.html" class="link-cta">Shop now</a></p>
      </div>

      <div id="cartItems" class="cart-items-list" aria-live="polite"></div>
    </div>

    <!-- Right: order summary + address -->
    <aside class="cart-summary-col" aria-labelledby="orderSummaryHeading">
      <h2 id="orderSummaryHeading" class="summary-title">Order Summary</h2>

      <div class="summary-block">
        <div class="summary-row"><div>Items</div><div id="summaryItemsCount">0</div></div>
        <div class="summary-row"><div>Subtotal</div><div id="summarySubtotal">Rs 0</div></div>
        <div class="summary-row"><div>Delivery</div><div id="summaryDelivery">Rs 0</div></div>
        <div class="summary-row total-row"><div><strong>Total</strong></div><div id="summaryTotal"><strong>Rs 0</strong></div></div>
      </div>

      <form id="checkoutForm" class="checkout-form" onsubmit="return false;">
        <h3 class="form-title">Delivery Details</h3>

        <label class="field">
          <span class="field-label">Full name</span>
          <input id="fieldName" name="name" type="text" required placeholder="e.g. Ali Khan">
        </label>

        <label class="field">
          <span class="field-label">Phone (WhatsApp)</span>
          <input id="fieldPhone" name="phone" type="tel" required placeholder="+92 3xx xxxxxxx">
        </label>

        <label class="field">
          <span class="field-label">Address</span>
          <textarea id="fieldAddress" name="address" rows="3" required placeholder="House number, street, area"></textarea>
        </label>

        <label class="field">
          <span class="field-label">City</span>
          <input id="fieldCity" name="city" type="text" placeholder="Karachi" required>
        </label>

        <label class="field small">
          <input id="clearCartAfterOrder" type="checkbox">
          <span style="margin-left:8px">Clear cart after placing order</span>
        </label>

        <div style="height:10px"></div>

        <button id="placeOrderBtn" class="btn-place-order" type="button">
          <!-- WhatsApp icon inline SVG -->
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg">
            <path d="M20.5 3.5C18.1 1.1 14.6 0 11 0 4.9 0 0 4.9 0 11c0 2 0.5 3.9 1.4 5.6L0 24l7.8-1.6C10.1 23.1 11.5 23.5 13 23.5 19.1 23.5 24 18.6 24 12.5 24 9 22.9 5.5 20.5 3.5z" fill="#25D366"/>
            <path d="M17.3 14.8c-.2-.1-1.2-.6-1.4-.7-.2-.1-.4-.1-.6.1-.3.2-1.2.6-1.8.8-.2.1-.3.1-.5-.1-.5-.2-1.5-.5-2.5-1.5-.9-.8-1.4-1.9-1.6-2.3-.1-.3 0-.5.2-.7.1-.1.3-.3.3-.5 0-.2-.1-.5-.1-.7 0-.2-.5-.9-.7-1.2-.2-.2-.4-.2-.6-.2-.3 0-.6 0-.9 0-.3 0-.7.1-1 .4-.3.3-1 1-1 2.5 0 1.4 1.1 2.7 1.3 2.9.2.2 2.3 3.6 5.9 4.9 3.6 1.3 3.6.9 4.3.8.7-.1 2.1-1 2.4-2.1.3-1.1.3-2 .2-2.2-.1-.2-.5-.3-.8-.4z" fill="#fff"/>
          </svg>
          <span style="margin-left:8px">Place Order</span>
        </button>

        <div id="formNote" class="form-note">Note: You'll be redirected to WhatsApp with your order details to place the order.</div>
      </form>
    </aside>

  </div>
</section>


  <footer class="site-footer">
  <div class="footer-inner">

    <!-- LEFT: Contact Block -->
    <div class="footer-contact">
      <h4 style="margin:0 0 10px;font-size:16px;color:rgba(18,50,38,0.9)">Contact</h4>

      <p style="margin:0 0 6px;font-size:14px;color:rgba(18,50,38,0.8)">
        <strong>Address:</strong><br>
        Bhubtiyan Chowk, Raiwind Road, Lahore, Pakistan
      </p>

      <p style="margin:0 0 6px;font-size:14px;color:rgba(18,50,38,0.8)">
        <strong>Email:</strong>
        <a href="mailto:info@hunzasparklets.com.pk" style="color:rgba(18,50,38,0.85);text-decoration:none;">
          info@hunzasparklets.com.pk
        </a>
      </p>

      <p style="margin:0;font-size:14px;color:rgba(18,50,38,0.8)">
        <strong>Phone:</strong>
        <a href="tel:+923225017998" style="color:rgba(18,50,38,0.85);text-decoration:none;">
          +92 322 5017998
        </a>
      </p>
    </div>

    <!-- RIGHT: Your existing logo + socials -->
    <div style="display:flex;flex-direction:column;gap:14px;align-items:flex-end">
      <div style="display:flex;gap:12px;align-items:center">
        <img src="images/logos/hunza-sparklets-logo.webp" alt="logo" style="height:36px">
        <div style="font-size:14px;color:rgba(18,50,38,0.8)">¬© <strong>Hunza Sparklets</strong> ‚Äî All rights reserved</div>
      </div>

      <div class="socials">
        <a href="https://www.instagram.com/hunzasparklets/?igsh=MW1teW41OWZxNjMyNA%3D%3D#" 
           target="_blank" aria-label="Instagram">
          <svg viewBox="0 0 24 24">
            <path d="M7 2C4.2 2 2 4.2 2 7v10c0 2.8 2.2 5 5 5h10c2.8 0 5-2.2 5-5V7c0-2.8-2.2-5-5-5H7zm10 2c1.7 0 3 1.3 3 3v10c0 1.7-1.3 3-3 3H7c-1.7 0-3-1.3-3-3V7c0-1.7 1.3-3 3-3h10zm-5 3.5A5.5 5.5 0 1 0 17.5 13 5.5 5.5 0 0 0 12 7.5zm0 9A3.5 3.5 0 1 1 15.5 13 3.5 3.5 0 0 1 12 16.5zm4.8-10.8a1.3 1.3 0 1 0 1.3 1.3 1.3 1.3 0 0 0-1.3-1.3z"/>
          </svg>
        </a>

        <a href="https://www.facebook.com/people/Hunza-Sparklets-pvt-ltd/61560314942159/?rdid=yQPu2sJ5PvcHBvho&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2F1LpETsMa2S%2F"
           target="_blank" aria-label="Facebook">
          <svg viewBox="0 0 24 24">
            <path d="M22 12a10 10 0 1 0-11.5 9.9v-7H8v-3h2.5V9.5A3.5 3.5 0 0 1 14.3 6h2.7v3h-2c-.8 0-1.5.7-1.5 1.5V12H17l-.5 3h-2.9v7A10 10 0 0 0 22 12z"/>
          </svg>
        </a>
      </div>
    </div>

  </div>
</footer>

<a href="https://wa.me/923225017998" class="whatsapp-float" target="_blank" aria-label="Chat on WhatsApp">
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp Icon">
</a>

  <script>
    const hamburger = document.getElementById('hamburger');
    const mobileMenu = document.getElementById('mobileMenu');
    const closeMenu = document.getElementById('closeMenu');

    hamburger.addEventListener('click', ()=>{
      hamburger.classList.toggle('open');
      mobileMenu.classList.toggle('open');
      mobileMenu.setAttribute('aria-hidden', mobileMenu.classList.contains('open') ? 'false' : 'true');
    });
    closeMenu.addEventListener('click', ()=>{
      hamburger.classList.remove('open');
      mobileMenu.classList.remove('open');
      mobileMenu.setAttribute('aria-hidden','true');
    });

    // close menu on click outside
    document.addEventListener('click', (e)=>{
      if(mobileMenu.classList.contains('open')){
        const inside = mobileMenu.contains(e.target) || hamburger.contains(e.target);
        if(!inside){
          mobileMenu.classList.remove('open');
          hamburger.classList.remove('open');
          mobileMenu.setAttribute('aria-hidden','true');
        }
      }
    });

    // simple sticky effect for header
    const header = document.querySelector('.site-header');
    window.addEventListener('scroll', ()=>{
      if(window.scrollY > 40) header.style.boxShadow = '0 6px 24px rgba(18,50,38,0.06)';
      else header.style.boxShadow = 'none';
    });
  </script>

  <script>
  const toggle = document.getElementById("themeToggle");

  // === LOAD SAVED THEME ===
  const savedTheme = localStorage.getItem("theme");
  if (savedTheme === "dark") {
    document.documentElement.classList.add("dark");
    toggle.textContent = "‚òÄÔ∏è"; // Sun icon
  } else {
    toggle.textContent = "üåô"; // Moon icon
  }

  // === TOGGLE LOGIC ===
  toggle.addEventListener("click", () => {
    const isDark = document.documentElement.classList.toggle("dark");

    // Update icon
    toggle.textContent = isDark ? "‚òÄÔ∏è" : "üåô";

    // Save preference
    localStorage.setItem("theme", isDark ? "dark" : "light");
  });
</script>

<script>
/* Cart functionality: stores cart in localStorage under "hunza_cart".
   - Unique items = number of distinct products (keys)
   - Preserved across pages (localStorage)
   - Works even if buy-bottled-water.html not loaded (safe guards)
*/

/* Utility: parse price string like "Rs 1,000" -> number 1000 */
function parsePrice(text) {
  if(!text) return 0;
  const digits = text.replace(/[^\d.]/g, '');
  return digits ? Number(digits) : 0;
}

/* Read/save cart object (productName => {name, price, qty}) */
function readCart() {
  try {
    return JSON.parse(localStorage.getItem('hunza_cart') || '{}');
  } catch (e) {
    return {};
  }
}
function saveCart(cart) {
  localStorage.setItem('hunza_cart', JSON.stringify(cart));
}

/* Count unique items */
function uniqueCount(cart) {
  return Object.keys(cart).filter(k => cart[k] && cart[k].qty > 0).length;
}

/* Update header UI: show cart if uniqueCount>0, otherwise show buy button.
   Uses poof animation classes for a pleasant swap.
*/
function updateHeaderUI() {
  const cartBtn = document.getElementById('headerCart');
  const buyBtn = document.getElementById('headerBuy');
  const badge = document.getElementById('cartBadge');
  if (!cartBtn || !buyBtn || !badge) return;

  const cart = readCart();
  const count = uniqueCount(cart);

  // update badge number or hide it
  if (count > 0) {
    badge.textContent = count;
    badge.classList.remove('hidden');
  } else {
    badge.classList.add('hidden');
  }

  // If cart present: show cart button, hide buy. If not: reverse.
  if (count > 0) {
    // if currently hidden, animate swap
    if (getComputedStyle(cartBtn).display === 'none') {
      // poof out buy, then show cart poof in
      buyBtn.classList.add('poof-out');
      setTimeout(()=> {
        buyBtn.style.display = 'none';
        buyBtn.classList.remove('poof-out');
        cartBtn.style.display = 'inline-flex';
        cartBtn.classList.add('poof-in');
        setTimeout(()=> cartBtn.classList.remove('poof-in'), 400);
      }, 220);
    } else {
      // if already buy hidden but cart visible, ensure visible without animation
      buyBtn.style.display = 'none';
      cartBtn.style.display = 'inline-flex';
    }
  } else {
    // no items: show buy, hide cart with reverse animation
    if (getComputedStyle(buyBtn).display === 'none') {
      cartBtn.classList.add('poof-out');
      setTimeout(()=> {
        cartBtn.style.display = 'none';
        cartBtn.classList.remove('poof-out');
        buyBtn.style.display = 'inline-flex';
        buyBtn.classList.add('poof-in');
        setTimeout(()=> buyBtn.classList.remove('poof-in'), 400);
      }, 200);
    } else {
      cartBtn.style.display = 'none';
      buyBtn.style.display = 'inline-flex';
    }
  }
}

/* Add item to cart (name, price, qty) */
function addToCart(name, price, qty) {
  if (!name) return;
  const cart = readCart();
  if (!cart[name]) {
    cart[name] = { name, price: price || 0, qty: 0 };
  }
  cart[name].qty = (cart[name].qty || 0) + Math.max(1, Number(qty || 1));
  saveCart(cart);
  updateHeaderUI();
}

/* Attach listeners to Add to Cart buttons on the buy page (if present) */
function wireAddToCartButtons() {
  // NodeList might be empty on non-buy pages. That's OK.
  const addButtons = document.querySelectorAll('.bp-add-cart');
  addButtons.forEach(btn => {
    btn.addEventListener('click', (e) => {
      // find product card container
      const card = btn.closest('.bp-card');
      if (!card) return;

      const nameEl = card.querySelector('.bp-name');
      const priceEl = card.querySelector('.bp-price');
      const qtyInput = card.querySelector('.bp-qty-input');

      const name = nameEl ? nameEl.textContent.trim() : 'Product';
      const price = priceEl ? parsePrice(priceEl.textContent) : 0;
      const qty = qtyInput ? Math.max(1, Number(qtyInput.value || 1)) : 1;

      // Add to cart
      addToCart(name, price, qty);

      // Quick visual feedback on the Add button (optional)
      btn.classList.add('added');
      setTimeout(()=> btn.classList.remove('added'), 600);

      // After first add, header will swap automatically via updateHeaderUI()
    });
  });
}


/* On load: initialize UI and wire buttons */
document.addEventListener('DOMContentLoaded', ()=> {
  // ensure badge element exists and initial state matches localStorage
  // If elements are not present yet (header not on this page), skip with guarding
  updateHeaderUI();
  wireAddToCartButtons();
});

/* Also re-run wireAddToCartButtons if DOM changes or content is loaded dynamically */
</script>

<script>
/* CART PAGE SCRIPT
   Expects cart stored in localStorage under key "hunza_cart"
   Format: { "Product name": { name, price:number, qty:number, ... } }
*/

(function () {
  const CART_KEY = 'hunza_cart';
  const DELIVERY_FEE = 0; // If you want a flat delivery fee, set here

  function readCart() {
    try { return JSON.parse(localStorage.getItem(CART_KEY) || '{}'); }
    catch(e) { return {}; }
  }
  function saveCart(cart) {
    localStorage.setItem(CART_KEY, JSON.stringify(cart));
    // update header badge if present
    const badge = document.getElementById('cartBadge');
    if (badge) {
      const count = Object.keys(cart).filter(k => cart[k].qty > 0).length;
      badge.textContent = count;
      badge.classList.toggle('hidden', count === 0);
      // also swap header UI if previous code present
      // (we assume updateHeaderUI exists from earlier global script; call if available)
      if (typeof updateHeaderUI === 'function') updateHeaderUI();
    }
  }

  function formatRs(n) {
    // simple formatting with thousand separators
    return 'Rs ' + Number(n).toLocaleString('en-US', { maximumFractionDigits: 0 });
  }

  function calculateTotals(cart) {
    let subtotal = 0;
    for (const k of Object.keys(cart)) {
      const item = cart[k];
      subtotal += (item.price || 0) * (item.qty || 0);
    }
    const delivery = DELIVERY_FEE;
    const total = subtotal + delivery;
    return { subtotal, delivery, total, itemsCount: Object.keys(cart).filter(k => cart[k].qty > 0).length };
  }

  function renderEmpty() {
    document.getElementById('cartItems').innerHTML = '';
    document.getElementById('cartEmpty').hidden = false;
    document.getElementById('checkoutForm').style.display = 'none';
    document.getElementById('summaryItemsCount').textContent = '0';
    document.getElementById('summarySubtotal').textContent = formatRs(0);
    document.getElementById('summaryDelivery').textContent = formatRs(0);
    document.getElementById('summaryTotal').textContent = formatRs(0);
  }

  function renderCart() {
    const cart = readCart();
    const container = document.getElementById('cartItems');
    container.innerHTML = '';
    const keys = Object.keys(cart).filter(k => cart[k].qty > 0);
    if (keys.length === 0) {
      renderEmpty();
      return;
    }
    document.getElementById('cartEmpty').hidden = true;
    document.getElementById('checkoutForm').style.display = 'block';

    for (const key of keys) {
      const item = cart[key];
      // Create node
      const card = document.createElement('div');
      card.className = 'cart-item';
      card.dataset.name = item.name;

      // image (use item's image if saved; otherwise a placeholder)
      const imgSrc = item.image || 'images/products/500-ml-bottle-premium-no-bg.png';
      card.innerHTML = `
        <img class="item-thumb" src="${imgSrc}" alt="${escapeHtml(item.name)}">
        <div class="item-info">
          <h4 class="item-name">${escapeHtml(item.name)}</h4>
          <div class="item-meta">Unit price: <span class="item-price">${formatRs(item.price || 0)}</span></div>
          <div style="height:6px"></div>
          <div class="item-meta">Subtotal: <strong class="item-subtotal">${formatRs((item.price||0)*(item.qty||0))}</strong></div>
        </div>

        <div class="item-actions">
          <div class="qty" aria-label="Quantity controls">
            <button class="qty-btn minus" data-action="minus" title="Decrease">‚àí</button>
            <input class="qty-input" type="number" min="1" value="${item.qty || 1}">
            <button class="qty-btn plus" data-action="plus" title="Increase">+</button>
          </div>
          <button class="item-remove" data-action="remove" title="Remove item">Remove</button>
        </div>
      `;
      container.appendChild(card);
    }
    updateSummaryUI();
  }

  function updateSummaryUI() {
    const cart = readCart();
    const totals = calculateTotals(cart);
    document.getElementById('summaryItemsCount').textContent = totals.itemsCount;
    document.getElementById('summarySubtotal').textContent = formatRs(totals.subtotal);
    document.getElementById('summaryDelivery').textContent = formatRs(totals.delivery);
    document.getElementById('summaryTotal').textContent = formatRs(totals.total);
  }

  function escapeHtml(str) {
    if (!str) return '';
    return String(str).replace(/[&<>"']/g, function (m) {
      return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[m];
    });
  }

  /* Delegate events for qty/change/remove */
  document.addEventListener('click', function (e) {
    const plus = e.target.closest('.qty-btn.plus');
    const minus = e.target.closest('.qty-btn.minus');
    const remove = e.target.closest('.item-remove');

    if (plus || minus) {
      const card = (plus || minus).closest('.cart-item');
      if (!card) return;
      const name = card.dataset.name;
      const input = card.querySelector('.qty-input');
      let qty = Number(input.value || 1);
      qty = plus ? qty + 1 : Math.max(1, qty - 1);
      input.value = qty;
      updateCartQty(name, qty);
    }

    if (remove) {
      const card = remove.closest('.cart-item');
      if (!card) return;
      const name = card.dataset.name;
      removeFromCart(name);
    }
  });

  document.addEventListener('change', function (e) {
    if (e.target.matches('.qty-input')) {
      const input = e.target;
      const card = input.closest('.cart-item');
      if (!card) return;
      const name = card.dataset.name;
      let qty = Math.max(1, Number(input.value || 1));
      input.value = qty;
      updateCartQty(name, qty);
    }
  });

  function updateCartQty(name, qty) {
    const cart = readCart();
    if (!cart[name]) return;
    cart[name].qty = qty;
    saveCart(cart);
    // update subtotal text inside card
    const card = document.querySelector(`.cart-item[data-name="${CSS.escape(name)}"]`);
    if (card) {
      const subtotalEl = card.querySelector('.item-subtotal');
      subtotalEl.textContent = formatRs((cart[name].price || 0) * (cart[name].qty || 0));
    }
    updateSummaryUI();
  }

  function removeFromCart(name) {
    const cart = readCart();
    if (!cart[name]) return;
    delete cart[name];
    saveCart(cart);
    renderCart();
  }

  /* Place order button -> build message and open WhatsApp */
  document.getElementById('placeOrderBtn').addEventListener('click', function () {
    const cart = readCart();
    const keys = Object.keys(cart).filter(k => cart[k].qty > 0);
    if (keys.length === 0) {
      alert('Your cart is empty.');
      return;
    }

    // validate fields
    const name = document.getElementById('fieldName').value.trim();
    const phone = document.getElementById('fieldPhone').value.trim();
    const address = document.getElementById('fieldAddress').value.trim();
    const city = document.getElementById('fieldCity').value.trim();
    if (!name || !phone || !address || !city) {
      alert('Please fill in your delivery details (name, phone, address, city).');
      return;
    }

    // build message
    let lines = [];
    lines.push(`Order from Hunza Sparklets Website:`);
    lines.push('');
    lines.push(`Customer: ${name}`);
    lines.push(`Phone: ${phone}`);
    lines.push(`Address: ${address}, ${city}`);
    lines.push('');
    lines.push(`Order details:`);
    let subtotal = 0;
    for (const key of keys) {
      const it = cart[key];
      const lineSubtotal = (it.price || 0) * (it.qty || 0);
      subtotal += lineSubtotal;
      lines.push(`‚Ä¢ ${it.name} √ó ${it.qty} ‚Äî ${formatRs(it.price)} each ‚Äî ${formatRs(lineSubtotal)}`);
    }
    const delivery = DELIVERY_FEE;
    const total = subtotal + delivery;
    lines.push('');
    lines.push(`Subtotal: ${formatRs(subtotal)}`);
    lines.push(`Delivery: ${formatRs(delivery)}`);
    lines.push(`Total: ${formatRs(total)}`);
    lines.push('');
    lines.push(`Notes: ${document.getElementById('checkoutForm').querySelector('textarea') ? '' : ''}`);
    lines.push('');
    lines.push(`Please confirm all details and send this message to place your order.`);

    const message = encodeURIComponent(lines.join('\n'));
    const waNumber = '923225017998';
    const waUrl = `https://wa.me/${waNumber}?text=${message}`;

    // open whatsapp
    window.open(waUrl, '_blank');

    // optionally clear cart if user checked checkbox
    const clearAfter = document.getElementById('clearCartAfterOrder').checked;
    if (clearAfter) {
      localStorage.removeItem(CART_KEY);
      saveCart({});
      renderCart();
    }
  });

  // initial render on DOM ready
  document.addEventListener('DOMContentLoaded', function () {
    renderCart();
  });

})();
</script>


</body>
</html>
